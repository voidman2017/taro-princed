# 编译时

## 组件配置

packages/taro-webpack5-runner/src/utils/component.ts

```
export const componentConfig: IComponentConfig = {
  includes: new Set(['view', 'catch-view', 'static-view', 'pure-view', 'scroll-view', 'image', 'static-image', 'text', 'static-text']),
  exclude: new Set(),
  thirdPartyComponents: new Map(),
  includeAll: false
}

```

【编译时】

1. 修改配置
   在解析源码工程时，会根据代码中使用到的组件，往该配置中添加组件例如：
   packages/taro-plugin-vue3/src/webpack.mini.ts ，packages/taro-plugin-vue2/src/index.ts - preTransformNode （vue钩子函数）
   packages/taro-webpack5-runner/src/plugins/TaroNormalModulesPlugin.ts - TaroNormalModulesPlugin
2. 使用配置
   在编译阶段，使用componnetConfig生成运行时需要使用到的基础模板
   packages/taro-webpack5-runner/src/plugins/MiniPlugin.ts - generateTemplateFile

packages/shared/src/template.ts - BaseTemplate.buildTemplate

-> buildStandardComponentTemplate

# 运行时


# 总结


# 杂记

类似于低码设计。

以物料 + 配置的形式，呈现最终运行效果。

物料即生成的 base.wxml, 配置则为运行时中 data.root 。


运行时data.root -> packages/taro-loader/src/page.ts -> createPageConfig -> packages/taro-runtime/src/dsl/common.ts
